package cn.zhongzhi.test;


import cn.zhongzhi.util.component.TextMatchingService;
import jakarta.annotation.Resource;
import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.boot.test.context.SpringBootTest;

/**
 * @author suchengbo
 * @Date 2025/3/22 14:56
 */
@SpringBootTest
public class AiOpenTest {
    @Value("${ai.endpoint}")
    private String url;
    @Value("${ai.api-key}")
    private String apiKey;
    @Resource
    private TextMatchingService textMatchingService;

    //测试HttpUtils 的 sendPostRequest 方法
    @Test
    public void testSendPostRequest() {/*
        KeywordConfig.InnerGroup innerGroup = textMatchingService.matchAndGetSchema("法定代表人身份证明", "姓名\n" +
                "胡\n" +
                "性别\n" +
                "男\n" +
                "民族汉\n" +
                "出生\n" +
                "1969年2月27日\n" +
                "住址\n" +
                "长沙市开福区捞刀河镇大\n" +
                "星村委笔架山组579号\n" +
                "公民身份号码\n" +
                "430121196902279413");
        // 构建请求参数
        Map<String, Object> params = new HashMap<>();
        params.put("file_item_schema_name","法定代表人身份证明");
        params.put("file_item_schema",innerGroup.getSchema());
        params.put("file_ocr_result", "姓名\n" +
                "胡\n" +
                "性别\n" +
                "男\n" +
                "民族汉\n" +
                "出生\n" +
                "1969年2月27日\n" +
                "住址\n" +
                "长沙市开福区捞刀河镇大\n" +
                "星村委笔架山组579号\n" +
                "公民身份号码\n" +
                "430121196902279413");

        // 发送 POST 请求
        String response = HttpUtils.sendPostRequest(url, apiKey, params);
        if (ObjUtil.isNotEmpty(response)){
            if (JSONUtil.isTypeJSONObject(response)){
                JSONObject jsonObject = JSONUtil.parseObj(response);
                System.out.println(jsonObject);
            }else if (JSONUtil.isTypeJSONArray(response)){
                JSONArray jsonArray = JSONUtil.parseArray(response);
                System.out.println(jsonArray);
            }

        }*/
    }
}
